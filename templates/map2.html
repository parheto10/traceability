{% load static %}
{% load leaflet_tags %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
    {% leaflet_js %}
    {% leaflet_css %}
  <title>MAP-LEAFLET</title>
</head>
<body>

{% for foo in parcelle_count %}

{% endfor %}

<script>
    window.addEventListener("map:init", function (e) {
        var detail = e.detail;
        ...
        L.marker([50.5, 30.5]).addTo(detail.map);
        ...
    }, false);
</script>

{#{% if parcelles %}#}
{# <script>#}
{#  function map_init_basic (map, options) {#}
{#   var marker = null;#}
{#   map.setView([51.505, -0.09], 13);#}
{#    {% for parcelle in parcelles %}#}
{#        marker = new L.marker([{{parcelle.coordonnees}}])#}
{#		.bindPopup("<h3>"+{{parcelle.producteur.nom}}+"</h3>")#}
{#		.addTo(map);#}
{#    {% endfor %}#}
{#	 }#}
{#	</script>#}
{#{% else %}#}
{#    <p>Aucune Parcelle</p>#}
{#{% endif %}#}
{#  {% leaflet_map "map" callback="window.map_init_basic" %}#}

{#<script type="text/javascript">#}
{##}
{#    function map_init_basic (map, options) {#}
{##}
{#        {% for parcelle in parcelles %}#}
{##}
{#            marker = new L.marker([{{parcelle.latitude}}, {{parcelle.longitude}}])#}
{#                .bindPopup("<h3>"+{{parcelle.producteur.nom}}+"</h3>")#}
{#                .addTo(map);#}
{##}
{#        {% endfor %}#}
{##}
{#    }#}
{##}
{#</script>#}


{#{% if latest_device_list %}#}
{# <script type="text/javascript">#}
{##}
{#    {% for parcelle in parcelles %}#}
{#			 function map_init_basic (map, options) {#}
{##}
{#        marker = new L.marker([{{parcelle.latitude}}, {{parcelle.longitude}}])#}
{#		.bindPopup("<h3>"+{{parcelle.producteur.nom}}+"</h3>")#}
{#		.addTo(map);#}
{##}
{#              }#}
{#    {% endfor %}#}
{#	</script>#}
{#{% else %}#}
{#    <p>Aucune Parcelle ENregistr√©es.</p>#}
{#{% endif %}#}
{#  {% leaflet_map "yourmap" callback="window.map_init_basic" %}#}


</body>
</html>